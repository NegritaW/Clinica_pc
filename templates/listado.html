{% extends "base.html" %}
{% block title %}Listado de equipos{% endblock %}
{% block content %}

  {% if messages %}
    <div class="form-card">
      {% for message in messages %}
        <div class="alert 
          {% if message.tags == 'success' %}alert-success{% endif %}
          {% if message.tags == 'error' %}alert-error{% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <div class="form-card">
    <h2>Listado de equipos registrados</h2>

    {% if equipos %}
      <table class="styled-table">
        <thead>
          <tr>
            <th>Cliente</th>
            <th>Recepcionista</th>
            <th>Tipo</th>
            <th>Problema reportado</th>
            <th>Fecha</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for equipo in equipos %}
            <tr>
              <td>{{ equipo.cliente.nombre_completo }}</td>
              <td>{{ equipo.recepcionista.nombre_completo }}</td>
              <td>{{ equipo.tipo_equipo }}</td>
              <td>{{ equipo.problema_reportado|truncatechars:40 }}</td>
              <td>{{ equipo.fecha_recepcion|date:"d/m/Y H:i" }}</td>
              <td>
                <a class="btn" href="{% url 'detalle_equipo' equipo.id %}">Ver detalle</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No hay equipos registrados a√∫n.</p>
    {% endif %}

    <a class="btn" href="{% url 'registrar_equipo' %}">Registrar nuevo equipo</a>
  </div>
{% endblock %}
