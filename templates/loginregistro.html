{% extends "base.html" %}
{% block title %}Registro de usuario{% endblock %}
{% block content %}
  <div class="form-card">
    <h2>Registrar usuario</h2>

    <form method="post" action="{% url 'loginregistro' %}">
      {% csrf_token %}
      {% for field in form %}
      <div style="margin-top:10px;">
        {{ field.label_tag }}<br>
        {{ field }}
        {% for error in field.errors %}
          <p style="color: red; font-weight: bold; margin: 5px 0;">{{ error }}</p>
        {% endfor %}
      </div>
{% endfor %}
      <div style="margin-top:15px;">
        <button type="submit" class="btn">Registrar</button>
        <a href="{% url 'login' %}" class="btn">Volver al login</a>
      </div>
    </form>

    {% if messages %}
      <div id="msg-box" style="margin-top:15px; text-align:center;">
        {% for m in messages %}
          <p style="color: green; font-weight:bold;">{{ m }}</p>
        {% endfor %}
        <p id="countdown" style="color: gray; font-size:14px; margin-top:10px;">
          Ser√°s redirigido al login en <span id="seconds">10</span> segundos...
        </p>
      </div>

      <script>
        let timeLeft = 10;
        const secondsSpan = document.getElementById("seconds");

        const countdown = setInterval(() => {
          timeLeft--;
          secondsSpan.textContent = timeLeft;
          if (timeLeft <= 0) {
            clearInterval(countdown);
            window.location.href = "{% url 'login' %}";
          }
        }, 1000);
      </script>
  {% endif %}
  </div>
{% endblock %}