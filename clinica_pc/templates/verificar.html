{% extends "base.html" %}
{% block title %}Verificar equipo{% endblock %}
{% block content %}

<div class="form-card">
  <h2>Verificar estado de equipo</h2>
  <form method="get">
    <label for="nombre">Selecciona cliente:</label>
    <select id="nombre" name="nombre" required>
      <option value="">-- Selecciona un cliente --</option>
      {% for equipo in equipos %}
        <option value="{{ equipo.nombre }}" {% if request.GET.nombre == equipo.nombre %}selected{% endif %}>
          {{ equipo.nombre }} — {{ equipo.tipo }}
        </option>
      {% endfor %}
    </select>
    <button type="submit" class="btn">Ingresar</button>
  </form>

  {% if equipo %}
    <div style="margin-top: 20px; text-align: left;">
      <h3>Equipo de {{ equipo.nombre }}</h3>
      <p><strong>Tipo:</strong> {{ equipo.tipo }}</p>
      <p><strong>Problema informado:</strong> {{ equipo.problema }}</p>

      {% if equipo.estudiante %}
        <p><strong>Estudiante asignado:</strong> {{ equipo.estudiante }}</p>
      {% endif %}

      {% if equipo.estado %}
        <p>
          <strong>Estado:</strong> 
          <span 
            {% if equipo.estado == "entregado" %} style="color: green; font-weight: bold;" 
            {% elif equipo.estado == "pendiente" %} style="color: orange; font-weight: bold;"
            {% else %} style="color: red; font-weight: bold;" 
            {% endif %}>
            {{ equipo.estado }}
          </span>
        </p>
        <p><strong>Observaciones:</strong> {{ equipo.observaciones }}</p>
        <a href="{% url 'comprobante' equipo.nombre %}" class="btn">Ver comprobante</a>
      {% else %}
        <p>No tiene entrega registrada aún.</p>
        <a href="{% url 'reporte_entrega' %}?nombre={{ equipo.nombre }}" class="btn">Registrar entrega</a>
      {% endif %}
    </div>
  {% elif equipo is not none %}
    <p>No se encontró información del cliente.</p>
  {% endif %}
</div>

{% endblock %}